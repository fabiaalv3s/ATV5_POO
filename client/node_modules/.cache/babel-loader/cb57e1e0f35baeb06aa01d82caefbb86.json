{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fabia\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\Nova pasta\\\\listas-poo\\\\atvv-wb-typescript\\\\client\\\\src\\\\componentes\\\\Lista\\\\listaCliente.tsx\";\nimport { Component } from \"react\";\nimport 'materialize-css/dist/css/materialize.min.css';\nimport M from 'materialize-css';\nimport '../Style/myStyle.css';\nimport FormularioCadastroCliente from \"../Formulario/formularioCadastroCliente\";\nimport FormularioEdicaoCliente from \"../Formulario/edicao/formularioEdicaoCliente\";\nimport Cliente from \"../../Models/cliente\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ListaCliente extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      clientes: [],\n      clienteSelected: undefined\n    };\n    this.onClickDelete = this.onClickDelete.bind(this);\n    this.onClickEdit = this.onClickEdit.bind(this);\n  }\n\n  componentDidMount() {\n    var elems = document.querySelectorAll('.collapsible');\n    M.Collapsible.init(elems);\n    var elemsModal = document.querySelectorAll('.modal');\n    M.Modal.init(elemsModal);\n    fetch(\"http://localhost:3001/cliente\", {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(r => r.json()).then(r => {\n      this.setState({\n        clientes: r\n      });\n    });\n  }\n\n  onClickEdit(event) {\n    let id = event.target.id;\n    let idNumber = new Number(id).valueOf();\n    let cliente = this.state.clientes.find(item => item.id == idNumber);\n    this.setState({\n      clienteSelected: cliente\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.clienteSelected != this.state.clienteSelected) {\n      var elemsModal = document.querySelectorAll('.modal');\n      M.Modal.init(elemsModal);\n    }\n  }\n\n  async deleteCliente(id) {\n    let retorno = false;\n    await fetch(\"http://localhost:3001/cliente/deletar/\" + id, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      retorno = response.status === 200;\n    });\n    return retorno;\n  }\n\n  onClickDelete(event) {\n    let id = event.target.id;\n    Swal.fire({\n      title: 'Deletar cliente',\n      text: \"Essa ação não pode ser revertida!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Sim, deletar!'\n    }).then(async result => {\n      if (result.isConfirmed) {\n        let deleted = await this.deleteCliente(id);\n\n        if (deleted) {\n          Swal.fire('Deletado!', 'Cliente deletado com sucesso.', 'success').then(result => {\n            window.scrollTo({\n              top: 0,\n              behavior: 'smooth'\n            });\n            window.location.reload();\n          });\n        } else {\n          Swal.fire('Erro!', 'Um erro ocorreu.', 'error').then(result => {\n            window.scrollTo({\n              top: 0,\n              behavior: 'smooth'\n            });\n            window.location.reload();\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    var _this$state$clienteSe;\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"backgroundClientContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"titleContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          id: \"Title\",\n          children: \"Clientes cadastrados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"collapsibleContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"collapsible\",\n          children: this.state.clientes.map(item => {\n            let cliente = new Cliente(item.nome, item.nomeSocial, item.cpf, item.telefone, item.email, item.genero);\n            cliente.id = item.id;\n            let dataCadastro = new Date(item.createdAt);\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"collapsibleHeader\",\n                className: \"collapsible-header\",\n                children: cliente.nome\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"collapsibleBody\",\n                className: \"collapsible-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"G\\xEAnero: \", cliente.genero]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 58\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Email: \", cliente.email]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 56\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Telefone: \", cliente.telefone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 62\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"CPF: \", cliente.cpf]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 52\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Cadastrado em: \", dataCadastro.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"editDeleteButtonContainer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    id: \"editDeleteButton\",\n                    \"data-target\": \"modalEdit\",\n                    className: \"btn-floating btn-medium blue accent pulse modal-trigger\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      id: item.id,\n                      onClick: this.onClickEdit,\n                      children: \"create\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 145\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    id: \"editDeleteButton\",\n                    className: \"btn-floating btn-medium blue accent pulse\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      id: item.id,\n                      onClick: this.onClickDelete,\n                      className: \"small material-icons\",\n                      children: \"delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 107\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#modalSell\",\n                    id: \"editDeleteButton\",\n                    className: \"btn-floating btn-medium blue accent pulse modal-trigger\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      id: item.id,\n                      onClick: this.onClickEdit,\n                      className: \"small material-icons\",\n                      children: \"monetization_on\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 134\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#modalHistory\",\n                    id: \"editDeleteButton\",\n                    className: \"btn-floating btn-medium blu accent pulse modal-trigger\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      id: item.id,\n                      onClick: this.onClickEdit,\n                      className: \"small material-icons\",\n                      children: \"access_time\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 136\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 19\n              }, this)]\n            }, cliente.nome, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"addButtonContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#modalCadastro\",\n          className: \"btn-floating btn-large blue accent modal-trigger\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"large material-icons\",\n            children: \"add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 97\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalCadastro\",\n        className: \"modal modal-fixed-footer\",\n        children: /*#__PURE__*/_jsxDEV(FormularioCadastroCliente, {\n          tema: \"#ff4081 pink accent-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalEdit\",\n        className: \"modal modal-fixed-footer\",\n        children: ((_this$state$clienteSe = this.state.clienteSelected) === null || _this$state$clienteSe === void 0 ? void 0 : _this$state$clienteSe.id) && /*#__PURE__*/_jsxDEV(FormularioEdicaoCliente, {\n          cliente: this.state.clienteSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 46\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalSell\",\n        className: \"modal modal-fixed-footer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalHistory\",\n        className: \"modal modal-fixed-footer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/fabia/OneDrive/Área de Trabalho/Nova pasta/listas-poo/atvv-wb-typescript/client/src/componentes/Lista/listaCliente.tsx"],"names":["Component","M","FormularioCadastroCliente","FormularioEdicaoCliente","Cliente","Swal","ListaCliente","constructor","props","state","clientes","clienteSelected","undefined","onClickDelete","bind","onClickEdit","componentDidMount","elems","document","querySelectorAll","Collapsible","init","elemsModal","Modal","fetch","method","headers","then","r","json","setState","event","id","target","idNumber","Number","valueOf","cliente","find","item","componentDidUpdate","prevProps","prevState","snapshot","deleteCliente","retorno","response","status","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","deleted","window","scrollTo","top","behavior","location","reload","render","map","nome","nomeSocial","cpf","telefone","email","genero","dataCadastro","Date","createdAt","toLocaleString"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\n\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport M from 'materialize-css'\r\nimport '../Style/myStyle.css'\r\nimport FormularioCadastroCliente from \"../Formulario/formularioCadastroCliente\";\r\nimport FormularioEdicaoCliente from \"../Formulario/edicao/formularioEdicaoCliente\";\r\nimport Cliente from \"../../Models/cliente\";\r\nimport Swal from \"sweetalert2\";\r\nimport ModalTeste from \"../Formulario/edicao/modal\";\r\n\r\n\r\ntype prop = {\r\n  tema: string;\r\n};\r\n\r\ntype state = {\r\n  clientes: Array<any>\r\n  clienteSelected: Cliente | undefined\r\n}\r\n\r\nexport default class ListaCliente extends Component<prop, state> {\r\n\r\n\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      clientes: [],\r\n      clienteSelected: undefined\r\n    }\r\n    this.onClickDelete = this.onClickDelete.bind(this)\r\n    this.onClickEdit = this.onClickEdit.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    var elems = document.querySelectorAll('.collapsible');\r\n    M.Collapsible.init(elems);\r\n\r\n    var elemsModal = document.querySelectorAll('.modal');\r\n    M.Modal.init(elemsModal);\r\n\r\n    fetch(\"http://localhost:3001/cliente\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(r => r.json()).then(r => {\r\n      this.setState({\r\n        clientes: r\r\n      })\r\n    });\r\n  }\r\n\r\n  onClickEdit(event){\r\n    let id = event.target.id\r\n    let idNumber = new Number(id).valueOf()\r\n    let cliente = this.state.clientes.find(item=> item.id == idNumber);\r\n    this.setState({\r\n      clienteSelected: cliente\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Readonly<prop>, prevState: Readonly<state>, snapshot?: any): void {\r\n    if(prevState.clienteSelected != this.state.clienteSelected){\r\n      var elemsModal = document.querySelectorAll('.modal');\r\n      M.Modal.init(elemsModal);\r\n    }\r\n  }\r\n\r\n  async deleteCliente(id): Promise<boolean>  {\r\n    let retorno = false\r\n    await fetch(\"http://localhost:3001/cliente/deletar/\" + id, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    }).then(response => {\r\n      retorno = response.status === 200\r\n    })  \r\n    return retorno\r\n  }\r\n\r\n  onClickDelete(event) {\r\n    let id = event.target.id\r\n    Swal.fire({\r\n        title: 'Deletar cliente',\r\n        text: \"Essa ação não pode ser revertida!\",\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Sim, deletar!'\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n            let deleted = await this.deleteCliente(id)\r\n            if(deleted){\r\n                Swal.fire(\r\n                    'Deletado!',\r\n                    'Cliente deletado com sucesso.',\r\n                    'success'\r\n                    ).then(result => {\r\n                      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                      window.location.reload()\r\n                    })\r\n            }else{\r\n                Swal.fire(\r\n                    'Erro!',\r\n                    'Um erro ocorreu.',\r\n                    'error'\r\n                    ).then(result => {\r\n                      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                      window.location.reload()\r\n                    })\r\n            }\r\n        }\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"backgroundClientContainer\">\r\n        <div id=\"titleContainer\">\r\n          <h4 id=\"Title\">Clientes cadastrados</h4>\r\n        </div>\r\n        <div id=\"collapsibleContainer\">\r\n          <ul className=\"collapsible\">\r\n            {this.state.clientes.map(item => {\r\n              let cliente = new Cliente(item.nome, item.nomeSocial, item.cpf, item.telefone, item.email, item.genero)\r\n              cliente.id = item.id\r\n              let dataCadastro = new Date(item.createdAt)\r\n              return (\r\n                <li key={cliente.nome}>\r\n                  <div id=\"collapsibleHeader\" className=\"collapsible-header\">\r\n                    {cliente.nome}\r\n                  </div>\r\n                  <div id=\"collapsibleBody\" className=\"collapsible-body\">\r\n                    <span>Gênero: {cliente.genero}</span><br />\r\n                    <span>Email: {cliente.email}</span><br />\r\n                    <span>Telefone: {cliente.telefone}</span><br />\r\n                    <span>CPF: {cliente.cpf}</span><br />\r\n                    <span>Cadastrado em: {dataCadastro.toLocaleString()}</span>\r\n                    <br />\r\n                    <div id=\"editDeleteButtonContainer\">\r\n                      <button id=\"editDeleteButton\" data-target=\"modalEdit\" className=\"btn-floating btn-medium blue accent pulse modal-trigger\"><i id={item.id} onClick={this.onClickEdit}>create</i></button>\r\n\r\n                      <button id=\"editDeleteButton\" className=\"btn-floating btn-medium blue accent pulse\"><i id={item.id} onClick={this.onClickDelete} className=\"small material-icons\">delete</i></button>\r\n\r\n                      <a href=\"#modalSell\" id=\"editDeleteButton\" className=\"btn-floating btn-medium blue accent pulse modal-trigger\"><i id={item.id} onClick={this.onClickEdit} className=\"small material-icons\">monetization_on</i></a>\r\n                      <a href=\"#modalHistory\" id=\"editDeleteButton\" className=\"btn-floating btn-medium blu accent pulse modal-trigger\"><i id={item.id} onClick={this.onClickEdit} className=\"small material-icons\">access_time</i></a>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              )\r\n            })}\r\n          </ul>\r\n        </div>\r\n\r\n        <div id=\"addButtonContainer\">\r\n          <a href=\"#modalCadastro\" className=\"btn-floating btn-large blue accent modal-trigger\"><i className=\"large material-icons\">add</i></a>\r\n        </div>\r\n\r\n        {/* ----------------------------------------------------------------MODAL---------------------------------------------------------------- */}\r\n\r\n        <div id=\"modalCadastro\" className=\"modal modal-fixed-footer\">\r\n          <FormularioCadastroCliente tema=\"#ff4081 pink accent-2\" />\r\n        </div>\r\n        <div id=\"modalEdit\" className=\"modal modal-fixed-footer\">\r\n          {this.state.clienteSelected?.id && <FormularioEdicaoCliente cliente={this.state.clienteSelected} />}\r\n        </div>\r\n        <div id=\"modalSell\" className=\"modal modal-fixed-footer\">\r\n          \r\n        </div>\r\n        <div id=\"modalHistory\" className=\"modal modal-fixed-footer\">\r\n          \r\n        </div>\r\n      </div >\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}